<!-- Node template -->
<script type="text/ng-template" id="organisaatio.html">
    <span class="label">
        <i class="fa fa-sitemap organisaatio"
           ng-class="{ auki: (data.open || data.children.length == 0),
                kiinni: (!data.open && data.children.length > 0)}"
           ng-click="openChildren(data)"></i>
        <label>
            <a href="" ng-click="organisaatioSelector(data);close()">{{data.nimi['fi'] || data.nimi['sv'] ||
                data.nimi['en']}}</a>
            <span ng-repeat="type in data.organisaatiotyypit">({{type}}) </span>
        </label>
    </span>
    <ol ng-if="data.open">
        <li ng-repeat="data in data.children" ng-include="'organisaatio.html'">
        </li>
    </ol>

</script>


<div ng-controller="OrganisaatioTreeController">
    <button type="button" class="button small" ng-model="orgSelector" ng-show="!orgSelector" ng-click="show()"><i
            class="fa fa-plus"></i> Organisaatio
    </button>
    <div ng-show="orgSelector">
        <div class="modal-backdrop" ng-click="close()"></div>

        <div class="orgSearch">
            <input type="text" class="search" placeholder="Lisää organisaatioita" ng-model="orgTree.searchStr"/>
            <i class="fa fa-trash-o organisaatio" ng-click="clear()"></i>
            <br/>
            <span>Hakutuloksia: {{orgTree.model.numHits || 0}}</span>
        </div>
        <div class="clear"></div>
        <div class="orgSelector">
            <ol class="treelist collapsible">
                <li ng-repeat="data in orgTree.model.organisaatiot" ng-include="'organisaatio.html'">
                </li>
            </ol>
        </div>

    </div>
</div>
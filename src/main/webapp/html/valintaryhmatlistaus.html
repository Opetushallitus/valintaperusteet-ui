<!-- Node template -->
<script type="text/ng-template" id="valintaryhma_node.html">

    <span class="state-disabled label">
        <span   class="disclose icon valintaryhma folder"
                ng-class="{ collapse: domain.isCollapsed(data), file: domain.isFile(data), open: domain.isExpanded(data)}"
                ng-click="expandNode(data)">
        ​</span>
         <a href="#/valintaryhma/{{data.oid}}"> {{data.nimi}}</a>
    </span>
    <ol ng-if="data.isVisible" data-valintaryhmaoid="{{data.oid}}" >
        <li ng-repeat="data in data.alavalintaryhmat | orderBy:predicate "
            data-oid="{{data.oid}}"
            ng-show="!(!data.sisaltaaHakukohteita&&domain.search.vainHakukohteitaSisaltavatRyhmat)"
            class="{{addClass('noNesting',domain.isHakukohde(data))}} {{addClass('uiExpanded',domain.isExpanded(data))}} {{addClass('uiCollapsed',domain.isCollapsed(data))}}"
            ng-include="domain.getTemplate(data)">
        </li>
         <li ng-repeat="data in data.hakukohdeViitteet | orderBy:predicate"
             data-oid="{{data.oid}}"
             class="{{addClass('noNesting',domain.isHakukohde(data))}} {{addClass('uiExpanded',domain.isExpanded(data))}} {{addClass('uiCollapsed',domain.isCollapsed(data))}}"
             ng-include="domain.getTemplate(data)">
         </li>
    </ol>

</script>

<!--Leaf template -->
<script type="text/ng-template" id="hakukohde_leaf.html">
    <span class="icon hakukohde file">​</span>
    <div class="label"><a href="#/hakukohde/{{data.oid}}"> {{data.nimi}} ({{data.tila}})</a></div>
</script>


<h1>Valintaperusteet</h1>
<div class="tabs">
    <a href="#/etusivu" class="tab current"><span>Valintaryhmät ja hakukohteet</span></a>
    <a href="#/laskentakaava" class="tab"><span>Laskentakaavat</span></a>
    <a href="#/import" class="tab float-right"><span>Yhteisvalinnan hallinta</span></a>
</div>

<div class="tabsheets">

    <input id="osallistuu" type="checkbox" ng-model="domain.search.vainValmiitJaJulkaistut" ng-change="domain.refresh()"/>
    <label for="osallistuu">Vain valmiit ja julkaistut</label>

    <input id="vainHakukohteitaSisaltavatRyhmat" type="checkbox" ng-model="domain.search.vainHakukohteitaSisaltavatRyhmat" ng-change="domain.update()"/>
    <label for="vainHakukohteitaSisaltavatRyhmat">Vain hakukohteita sisältävät ryhmät</label>

    <input id="vainHakukohteet" type="checkbox" ng-model="domain.search.vainHakukohteet" ng-change="domain.update()"/>
    <label for="vainHakukohteet">Vain hakukohteet</label>

    <br/>

    <label for="haku">Hakuun kuuluvat hakukohteet</label>
    <select id="haku" ng-model="domain.search.haku" ng-options="haku.nimi.kieli_fi for haku in hakuModel.haut | orderBy:'nimi.kieli_fi'"  ng-change="domain.refresh()">
        <option value=""></option>
    </select>

    <label for="text">Hae</label>
    <input id="text" ng-model="domain.search.q" ng-change="domain.refresh()">

    <br />

    <a href="#/valintaryhma/root/lisaaSisaltyvaValintaryhma" class="button small">{{'valintaryhmatlistaus.add.valintaryhma' | i18n}}</a>
    <a href="#/lisaaHakukohde" class="button small">{{'valintaryhmatlistaus.add.hakukohde' | i18n}}</a>
    <a class="button small" ng-click="domain.expandTree()"> Laajenna puu</a>

    <br/>

    <div>Haku palautti {{domain.tilasto.valintaryhmia}} valintaryhmää ja {{domain.tilasto.hakukohteita}} hakukohdetta </div>


    <ol ng-if="!domain.search.vainHakukohteet" class="sortable treelist collapsible multiselect" nestedsortable="">
        <li ng-repeat="data in domain.valintaperusteList | orderBy:predicate"
            data-oid="{{data.oid}}"
            ng-model="data"
            ng-show="!(!data.sisaltaaHakukohteita&&domain.search.vainHakukohteitaSisaltavatRyhmat)"
            class="{{addClass('noNesting',domain.isHakukohde(data))}} {{addClass('uiExpanded',domain.isExpanded(data))}} {{addClass('uiCollapsed',domain.isCollapsed(data))}}"
            ng-include="domain.getTemplate(data)">
        </li>
    </ol>

    <table ng-if="domain.search.vainHakukohteet" class="virkailija-table-1 hakukohde-table" >  <!---->
        <thead>
            <tr>
                <th>Hakukohde</th>
                <th>Valintaryhmä</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="data in domain.hakukohteet | orderBy:predicate">
                <td>
                    <span class="float-left">
                        <span class="hakukohdeicon">​</span>
                        <span class="label"><a href="#/hakukohde/{{data.oid}}"> {{data.nimi}} ({{data.tila}})</a></span>
                    </span>
                </td>
                <td>
                    <span class="float-left">
                        <a href="#/valintaryhma/{{parent.oid}}" ng-repeat="parent in data.getParents()">{{parent.nimi}} / </a>
                    </span>
                </td>
            </tr>
        </tbody>
    </table>


</div>


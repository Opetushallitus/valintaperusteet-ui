
<!-- Arvojen syöttö -templatet -->
<script type="text/ng-template" id="desimaaliluku-template">
    <input type="text" size="9" ng-model="syoteparametri.arvo"/>
</script>
<script type="text/ng-template" id="kokonaisluku-template">
    <input type="text" size="9" ng-model="syoteparametri.arvo"/>
</script>
<script type="text/ng-template" id="totuusarvo-template">
    <input type="radio" size="9" ng-model="syoteparametri.arvo" value="true"/> Tosi
    <input type="radio" size="9" ng-model="syoteparametri.arvo" value="false"/> Epätosi
</script>
<script type="text/ng-template" id="merkkijono-template">
    <input type="text" size="9" ng-model="syoteparametri.arvo"/>
</script>


<!-- ARVOVÄLIKONVERTTERI template -->
<script type="text/ng-template" id="arvovalikonvertteri-template">
    <div class="form-item-content">

        <div class="settingsbox">
            <table class="settingstable">
                <thead>
                <tr>
                    <td></td>
                    <td>Min</td>
                    <td></td>
                    <td>Max</td>
                    <td>Pisteet</td>
                    <td>Palauta haettu arvo</td>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="konvparam in funktioSelection.konvertteri.parametrit">
                    <td>
                        <a ng-click="funktioSelection.konvertteri.removeParametri(konvparam)">X</a>
                    </td>
                    <td>
                        <input type="text" size="1" ng-model="konvparam.data.minValue"/>
                    </td>
                    <td>
                        <span ng-show="!$last" class="white-space-nowrap">&le; x &lt;</span>
                        <span ng-show="$last" class="white-space-nowrap">&le; x &le;</span>
                    </td>
                    <td>
                        <input type="text" size="1" ng-model="konvparam.data.maxValue"/>
                    </td>
                    <td><input type="text" size="3" ng-disabled="konvparam.data.palautaHaettuArvo == 'true'"
                               ng-model="konvparam.data.paluuarvo"/></td>

                    <td><input type="checkbox" ng-model="konvparam.data.palautaHaettuArvo" ng-true-value="true" ng-false-value="false"/></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>

<!-- ARVOKONVERTTERI template -->
<script type="text/ng-template" id="arvokonvertteri-template">
    <div class="form-item-content">

        <div class=" settingsbox">
            <table class="settingstable">
                <thead>
                <tr>
                    <td></td>
                    <td>Arvo</td>
                    <td>Pisteet</td>
                    <td>Hylkäysperuste</td>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="konvparam in funktioSelection.konvertteri.parametrit">
                    <td>
                        <a ng-click="funktioSelection.konvertteri.removeParametri(konvparam)">X</a>
                    </td>
                    <td><input type="text" size="9" ng-model="konvparam.data.arvo"/></td>
                    <td><input type="text" size="9" ng-model="konvparam.data.paluuarvo"/></td>
                    <td><input type="checkbox" ng-model="konvparam.data.hylkaysperuste" ng-true-value="true" ng-false-value="false" /></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>



<!-- LASKENTAKAAVAVIITTAUKSEN ASETUKSET -->
<div style="width:30%;float:right;" ng-if="funktioasetusTemplatePicker.showLaskentakaavaInformation">
    <div class="settingsform">
        <h3>Laskentakaavaviittauksen asetukset</h3>
        
        <div ng-repeat="valintaryhmaList in kaavaLista.valintaryhmaList()">
            <div ng-repeat="valintaryhma in valintaryhmaList" ng-if="valintaryhma.laskentakaavat.length > 0">
                <h3>{{valintaryhma.nimi}}</h3>
                <div ng-repeat="kaava in valintaryhma.laskentakaavat">
                    <div class="margin-bottom-1" ng-hide="kaava.id == fetched">
                        <input type="radio" name="kaava" value="{{kaava.id}}" ng-model="funktioSelection.data.id"/>
                        {{kaava.nimi}}
                    </div>
                </div>
            </div>
        </div>


        <span class="button small" ng-click="funktioSelection.removeThis(); funktioSelection = null; funktioasetusTemplatePicker.showLaskentakaavaInformation = false">Poista funktiokutsu</span>
    </div>
</div>


<!-- FUNKTIOASETUKSET -->
<div class="" style="width:30%;float:right;" ng-if="funktioasetusTemplatePicker.showFunktioInformation">
    <div class="settingsform">

        <h3>Funktioasetukset</h3>
        <div class="form-item" ng-if="funktioSelection.isNimettava()">
            <label class="form-item-label" for="">Nimi</label>

            <div class="form-item-content">
                <div class="field-text-containerbox">
                    <input type="text" ng-model="funktioSelection.getNimiParametri().data.arvo"/>
                </div>
            </div>
            <div class="clear"></div>
        </div>

        <!-- Haettava arvo -->
        <div class="form-item" ng-show="funktioSelection.isHaettavaArvoTyyppi()">

            <div ng-repeat="valintaperusteviite in funktioSelection.data.valintaperusteviitteet">
                <label class="form-item-label" style="width:50px;">Tyyppi</label>
                <div class="form-item-content">
                    <div class="field-select-containerbox">
                        <select ng-model="valintaperusteviite.lahde" ng-options="item.key as item.text for item in funktioSelection.getValintaperusteviitetyypit()">
                        </select>        
                    </div>
                    <div class="field-container-checkbox">
                        <input type="checkbox" id="requiredparam" ng-model="valintaperusteviite.onPakollinen"/>
                        <label for="requiredparam">Pakollinen tieto</label>
                    </div>
                </div>

                <label class="form-item-label" style="width:50px;">Kuvaus</label>

                <div class="form-item-content">
                    <textarea style="width: 330px" ng-model="valintaperusteviite.kuvaus"></textarea>
                </div>

                <div class="form-item">
                    <label class="form-item-label" for="">Tunniste</label>

                    <div class="form-item-content">
                        <div class="field-text-containerbox">
                            <input type="text" ng-model="valintaperusteviite.tunniste" required="required"/>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div>
            </div>
            
            <div ng-show="funktioSelection.konvertteri">
                <label class="form-item-label" style="width:50px;">Arvomuunnin</label>
                <div class="form-item-content">
                    <div class="field-select-containerbox">
                        <select ng-change="funktioSelection.konvertteri.setTyyppi(funktioSelection.konvertteri.uusityyppi)"
                                ng-model="funktioSelection.konvertteri.uusityyppi" ng-options="konvertterityyppi.tyyppi as konvertterityyppi.tyyppi for konvertterityyppi in funktioSelection.konvertteri.konvDefunktioSelection.konvertteriTyypit">
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <div class="form-item" ng-show="funktioSelection.konvertteri.tyyppi">
                    <label class="form-item-label" for="" style="width:100px;">Konversiomäärittelyt</label>
                    <div class="form-item-content" ng-include="funktioSelection.konvertteri.template">

                    </div>
                    <span class="button small" ng-click="funktioSelection.konvertteri.addParametri()">Lisää parametri</span>

                    <div class="clear"></div>
                </div>
            </div>

            <div class="clear"></div>
        </div>

        
    
        <div class="form-item" ng-if="funktioSelection.konvertteri && !funktioSelection.isHaettavaArvoTyyppi()">
            <div class="form-item-content">
                <div class="field-select-containerbox">
                    <select ng-change="funktioSelection.konvertteri.setTyyppi(funktioSelection.konvertteri.uusityyppi)"
                            ng-model="funktioSelection.konvertteri.uusityyppi" ng-options="konvertterityyppi.tyyppi as konvertterityyppi.tyyppi for konvertterityyppi in funktioSelection.konvertteri.konvDefunktioSelection.konvertteriTyypit">
                        <option value=""></option>
                    </select>
                </div>
            </div>

            <label class="form-item-label" style="width:100px;"
                   ng-show="funktioSelection.konvertteri.template">Konversiomäärittelyt</label>

            <div class="form-item-content" ng-include="funktioSelection.konvertteri.template"></div>
            <span class="button small" ng-click="funktioSelection.konvertteri.addParametri()">Lisää parametri</span>

            <div class="clear"></div>
        </div>

        <!-- SYÖTEPARAMETRIT -->
        <div class="form-item" ng-if="funktioSelection.syoteparametrit.length > 0">
            <label class="form-item-label" style="width:100px;">Arvon määrittelyt</label>

            <div class="form-item-content">

                <div class=" settingsbox">
                    <table class="settingstable">
                        <thead>
                        <tr>
                            <td>Määrite</td>
                            <td>Arvo</td>
                        </tr>
                        </thead>
                        <tbody>
                        
                        <tr ng-repeat="syoteparametri in funktioSelection.syoteparametrit">

                            
                            <td>Avain: {{syoteparametri.avain}}</td>
                            <td ng-include="syoteparametriTemplate(funktioSelection, $index)"></td>
                        </tr>
                       
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="clear"></div>
        </div>

        <span class="button small" ng-click="funktioSelection = undefined; funktioasetusTemplatePicker.showFunktioInformation = false">poista funktiokutsu</span>

    </div>

</div>

